{{ define "main" }}

  {{ $isntDefault := not (or (eq (trim $.Site.Params.contentTypeName " ") "post") (eq (trim $.Site.Params.contentTypeName " ") "")) }}
  {{ $contentTypeName := cond $isntDefault (string $.Site.Params.contentTypeName) "post" }}

  {{ $PageContext := . }}
  {{/* Once either .Paginator or .Paginate is called while generating a page,
    its result is cached, and any subsequent similar call will reuse the cached result.
    So we define $pages instead of $paginator (using .Paginate) to avoid confusion. */}}
  {{ $pages := where .Site.RegularPages "Section" "post" }}
  <div class="flex flex-col w-full max-w-4xl lg:max-w-5xl relative">
    <div class="flex flex-row">
      <section class="flex flex-col w-full md:w-2/3">
        {{ range (.Paginate $pages).Pages }}
          <article class="flex flex-col gap-y-3 p-6 mt-6 mx-2 md:mx-0 rounded-lg shadow-md bg-white dark:bg-gray-700">
            <h2 class="text-4xl font-semibold text-slate-800 dark:text-slate-200">
              <a href="{{ .RelPermalink }}">{{ .Title | .RenderString }}</a>
            </h2>

            {{ partial "block/desc.html" . }}
            {{ partial "block/taxonomies.html" .}}

            {{ partial "block/time.html" . }}
          </article>
        {{ end }}
      </section>
      <aside class="hidden md:flex flex-col md:w-1/3 ml-3 {{- if .Site.Params.header.sticky }} top-10 {{ else }} top-0 {{ end -}} sticky self-start">
        {{ partial "sidebar.html" . }}
      </aside>
    </div>

    {{ partial "pagination.html" . }}
  </div>
{{ end }}
